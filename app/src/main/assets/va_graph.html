<?xml version="1.0" encoding="UTF-8"?>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, height=device-height, user-scalable=no">
</head>

<script src="plotly-latest.min.js"></script>

<body bgcolor="#fafafa">
<div id="tester" style="width:600px;height:250px;"></div>
</body>

<script>
    function graph(data, date) {
        var indexOfMaxValue = data.reduce((iMax, x, i, arr) => x > arr[iMax] ? i : iMax, 0);
        var trace1 = {
            x: date,
            y: data,
            legendgroup: 'group',
            showlegend: false,
            marker: {color: 'rgb(64, 80, 181)'},
            name: 'first legend group',
            mode: 'markers',
            type: 'scatter'
        };
        var trace2 = {
            x: [null],
            y: [null],
            legendgroup: 'weekends',
            marker: {color: 'rgb(183, 189, 230)'},
            mode: 'markers',
            name: 'weekends',
            type: 'bar'
        };
        var layout = {
            autosize: true,
            showlegend: false,
            legend: {"orientation": "h"},
            shapes: [],
            height: 500,
            width: 500,
            font: {
    size: 16,
    color: '#7f7f7f'
  },
   yaxis: {
    range: [0, 100],
    title: 'Arousal',
    automargin: true,
    fixedrange: true,
  },
  xaxis: {
    range: [0, 100],
    title: 'Valence',
    automargin: true,
    fixedrange: true,
  },
             paper_bgcolor: '#fafafa',
             plot_bgcolor: '#fafafa'
            };


	    TESTER = document.getElementById('tester');
	    Plotly.newPlot( TESTER, [trace1, trace2], layout );
	 console.log(Math.max(...data));
	 console.log(data);
	 var indexOfMaxValue = data.reduce((iMax, x, i, arr) => x > arr[iMax] ? i : iMax, 0);
	 console.log(indexOfMaxValue);

    document.getElementById("tester").on('plotly_click', function(data){
        console.log(data.points[0].x);
        window.open(data.points[0].x, "_blank");
    });
	}
</script>

</html>